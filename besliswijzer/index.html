<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REST Besliswijzer - tools.hyperdata.nl</title>
    <link rel="stylesheet" href="css/style.css">

</head>
<body>
    <header>
        <div class="container">
            <div class="header-top">
                <div>
                    <h1>REST Besliswijzer</h1>
                    <p class="subtitle">HTTP API Design conform MFF BAS &amp; Nederlandse API Strategie</p>
                </div>
                <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle dark mode">
                    <span class="theme-label">Dark</span>
                </button>
            </div>
            <nav>
                <a href="#method-selector" class="nav-link active" data-tab="method-selector">Method</a>
                <a href="#decision-tree" class="nav-link" data-tab="decision-tree">Decision Tree</a>
                <a href="#status-codes" class="nav-link" data-tab="status-codes">Status Codes</a>
                <a href="#query-params" class="nav-link" data-tab="query-params">Query Parameters</a>
                <a href="#flowchart" class="nav-link" data-tab="flowchart">Flowchart</a>
                <a href="#richtlijnen" class="nav-link" data-tab="richtlijnen">Richtlijnen</a>
                <a href="#examples" class="nav-link" data-tab="examples">Voorbeelden</a>
            </nav>
        </div>
    </header>

    <main class="container">

        <!-- TAB 1: METHOD SELECTOR -->
        <section id="method-selector" class="tab-content active">
            <h2>Welke HTTP Method heb je nodig?</h2>
            <div class="question-card">
                <p class="question">Wat wil je doen met de resource?</p>
                <div class="options">
                    <button class="option-btn" data-method="GET" onclick="showMethod('GET')">
                        <span class="option-label">Data ophalen</span>
                    </button>
                    <button class="option-btn" data-method="HEAD" onclick="showMethod('HEAD')">
                        <span class="option-label">Alleen headers/metadata</span>
                    </button>
                    <button class="option-btn" data-method="POST" onclick="showMethod('POST')">
                        <span class="option-label">Nieuwe resource aanmaken</span>
                    </button>
                    <button class="option-btn" data-method="PUT" onclick="showMethod('PUT')">
                        <span class="option-label">Resource vervangen</span>
                    </button>
                    <button class="option-btn" data-method="PATCH" onclick="showMethod('PATCH')">
                        <span class="option-label">Resource deels wijzigen</span>
                    </button>
                    <button class="option-btn" data-method="DELETE" onclick="showMethod('DELETE')">
                        <span class="option-label">Resource verwijderen</span>
                    </button>
                </div>
            </div>

            <div id="method-result" class="result-card hidden">
                <div class="method-header">
                    <span id="method-badge" class="method-badge"></span>
                    <span id="method-title" class="method-title"></span>
                </div>
                <div id="method-details"></div>
            </div>

            <!-- METHOD REFERENCE TABLE -->
            <div class="reference-table">
                <h3>HTTP Methods Overzicht (RFC 9110 + MFF BAS ID08)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Method</th>
                            <th>Gebruik</th>
                            <th>Body</th>
                            <th>Idempotent</th>
                            <th>Safe</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="badge get">GET</span></td>
                            <td>Data ophalen (read)</td>
                            <td>Nee</td>
                            <td>Ja</td>
                            <td>Ja</td>
                        </tr>
                        <tr>
                            <td><span class="badge head">HEAD</span></td>
                            <td>Metadata/headers ophalen</td>
                            <td>Nee</td>
                            <td>Ja</td>
                            <td>Ja</td>
                        </tr>
                        <tr>
                            <td><span class="badge post">POST</span></td>
                            <td>Resource aanmaken (server bepaalt ID)</td>
                            <td>Ja</td>
                            <td>Nee</td>
                            <td>Nee</td>
                        </tr>
                        <tr>
                            <td><span class="badge put">PUT</span></td>
                            <td>Resource vervangen/aanmaken (client bepaalt ID)</td>
                            <td>Ja</td>
                            <td>Ja</td>
                            <td>Nee</td>
                        </tr>
                        <tr>
                            <td><span class="badge patch">PATCH</span></td>
                            <td>Resource deels wijzigen</td>
                            <td>Ja</td>
                            <td>Nee</td>
                            <td>Nee</td>
                        </tr>
                        <tr>
                            <td><span class="badge delete">DELETE</span></td>
                            <td>Resource verwijderen</td>
                            <td>Nee</td>
                            <td>Ja</td>
                            <td>Nee</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- TAB 2: DECISION TREE -->
        <section id="decision-tree" class="tab-content">
            <h2>Response Decision Tree</h2>
            <p class="section-intro">Loop stap voor stap door de beslisboom om de juiste HTTP status code te bepalen.</p>

            <div id="tree-container">
                <div id="tree-step" class="tree-step">
                    <!-- Dynamically rendered -->
                </div>
                <div id="tree-result" class="tree-result hidden"></div>
                <div id="tree-history" class="tree-history"></div>
            </div>
            <button id="tree-reset" class="btn-reset hidden" onclick="resetTree()">Opnieuw beginnen</button>

            <!-- STATIC DECISION TREE OVERVIEW -->
            <div class="decision-overview">
                <h3>Beslisboom Overzicht</h3>
                <ol class="tree-list">
                    <li>
                        <strong>Heeft de gebruiker een geldig token?</strong>
                        <span class="tree-no">Nee &rarr; 401 Unauthorized</span>
                    </li>
                    <li>
                        <strong>Heeft de gebruiker recht op deze actie?</strong>
                        <span class="tree-no">Nee &rarr; 403 Forbidden</span>
                    </li>
                    <li>
                        <strong>Is de body of query syntactisch correct?</strong>
                        <span class="tree-no">Nee &rarr; 400 Bad Request</span>
                        <span class="tree-warn">Path fouten zijn ALTIJD 404, niet 400</span>
                    </li>
                    <li>
                        <strong>Is de body semantisch correct? (POST/PUT/PATCH)</strong>
                        <span class="tree-no">Nee &rarr; 422 Unprocessable Entity</span>
                        <span class="tree-warn">GET, HEAD en DELETE hebben geen body, dus geen 422</span>
                    </li>
                    <li>
                        <strong>Bestaat de resource?</strong>
                        <span class="tree-no">Nee &rarr; 404 Not Found</span>
                    </li>
                    <li>
                        <strong>Werkt het onderliggende systeem correct?</strong>
                        <span class="tree-no">Nee &rarr; 500 Internal Server Error</span>
                        <span class="tree-warn">Altijd x-correlation-id meegeven</span>
                    </li>
                    <li>
                        <strong>Wordt er caching gebruikt? (GET/HEAD)</strong>
                        <span class="tree-no">Ja, ongewijzigd &rarr; 304 Not Modified</span>
                    </li>
                    <li>
                        <strong>Wordt er paging gebruikt? (GET collecties)</strong>
                        <span class="tree-no">Ja &rarr; 206 Partial Content</span>
                    </li>
                    <li>
                        <strong>Success!</strong>
                        <span class="tree-yes">200 / 201 / 204 afhankelijk van method</span>
                    </li>
                </ol>
            </div>
        </section>

        <!-- TAB 3: STATUS CODES -->
        <section id="status-codes" class="tab-content">
            <h2>HTTP Status Codes (MFF BAS ID10)</h2>
            <p class="section-intro">Minimale set van HTTP status codes per REST operatie conform MFF BAS ontwerprichtlijnen.</p>

            <div class="status-matrix">
                <h3>Status Code Matrix per Operatie</h3>
                <div class="matrix-scroll">
                    <table class="matrix-table">
                        <thead>
                            <tr>
                                <th>REST operatie</th>
                                <th>200</th>
                                <th>201</th>
                                <th>204</th>
                                <th>400</th>
                                <th>401</th>
                                <th>403</th>
                                <th>404</th>
                                <th>422</th>
                                <th>500</th>
                                <th>503</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="badge get">GET</span> collectie</td>
                                <td class="y">&#10003;</td><td></td><td></td>
                                <td class="y">&#10003;</td><td class="y">&#10003;</td><td class="y">&#10003;</td>
                                <td></td><td class="y">&#10003;</td><td class="y">&#10003;</td><td class="y">&#10003;</td>
                            </tr>
                            <tr>
                                <td><span class="badge get">GET</span> singleton</td>
                                <td class="y">&#10003;</td><td></td><td></td>
                                <td class="y">&#10003;</td><td class="y">&#10003;</td><td class="y">&#10003;</td>
                                <td class="y">&#10003;</td><td></td><td class="y">&#10003;</td><td class="y">&#10003;</td>
                            </tr>
                            <tr>
                                <td><span class="badge put">PUT</span> create</td>
                                <td></td><td class="y">&#10003;</td><td class="o">opt</td>
                                <td class="y">&#10003;</td><td class="y">&#10003;</td><td class="y">&#10003;</td>
                                <td></td><td class="y">&#10003;</td><td class="y">&#10003;</td><td class="y">&#10003;</td>
                            </tr>
                            <tr>
                                <td><span class="badge put">PUT</span> update</td>
                                <td class="y">&#10003;</td><td></td><td class="o">opt</td>
                                <td class="y">&#10003;</td><td class="y">&#10003;</td><td class="y">&#10003;</td>
                                <td class="y">&#10003;</td><td class="y">&#10003;</td><td class="y">&#10003;</td><td class="y">&#10003;</td>
                            </tr>
                            <tr>
                                <td><span class="badge patch">PATCH</span></td>
                                <td class="y">&#10003;</td><td></td><td class="o">opt</td>
                                <td class="y">&#10003;</td><td class="y">&#10003;</td><td class="y">&#10003;</td>
                                <td class="y">&#10003;</td><td class="y">&#10003;</td><td class="y">&#10003;</td><td class="y">&#10003;</td>
                            </tr>
                            <tr>
                                <td><span class="badge delete">DELETE</span></td>
                                <td class="o">opt</td><td></td><td class="y">&#10003;</td>
                                <td class="y">&#10003;</td><td class="y">&#10003;</td><td class="y">&#10003;</td>
                                <td class="y">&#10003;</td><td></td><td class="y">&#10003;</td><td class="y">&#10003;</td>
                            </tr>
                            <tr>
                                <td><span class="badge post">POST</span> create</td>
                                <td></td><td class="y">&#10003;</td><td></td>
                                <td class="y">&#10003;</td><td class="y">&#10003;</td><td class="y">&#10003;</td>
                                <td></td><td class="y">&#10003;</td><td class="y">&#10003;</td><td class="y">&#10003;</td>
                            </tr>
                            <tr>
                                <td><span class="badge post">POST</span> search</td>
                                <td class="y">&#10003;</td><td></td><td></td>
                                <td class="y">&#10003;</td><td class="y">&#10003;</td><td class="y">&#10003;</td>
                                <td class="y">&#10003;</td><td class="y">&#10003;</td><td class="y">&#10003;</td><td class="y">&#10003;</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="matrix-legend"><strong>opt</strong> = optioneel, afhankelijk van use case</p>
            </div>

            <!-- STATUS CODE DETAIL CARDS -->
            <div class="status-groups">
                <div class="status-group success">
                    <h3>2xx Success</h3>
                    <div class="status-card" onclick="toggleCard(this)">
                        <div class="status-header"><span class="code">200</span> OK</div>
                        <div class="status-body">Resource geretourneerd. Lege collectie is ook 200: <code>{ "data": [], "total": 0 }</code></div>
                    </div>
                    <div class="status-card" onclick="toggleCard(this)">
                        <div class="status-header"><span class="code">201</span> Created</div>
                        <div class="status-body">Resource aangemaakt. <strong>Location</strong> header bevat URI van nieuwe resource.</div>
                    </div>
                    <div class="status-card" onclick="toggleCard(this)">
                        <div class="status-header"><span class="code">202</span> Accepted</div>
                        <div class="status-body">Asynchrone verwerking gestart (bijv. bulk-delete). Geen directe response body.</div>
                    </div>
                    <div class="status-card" onclick="toggleCard(this)">
                        <div class="status-header"><span class="code">204</span> No Content</div>
                        <div class="status-body">Success zonder body. Gebruikt bij DELETE, of PUT/PATCH zonder return data.</div>
                    </div>
                    <div class="status-card" onclick="toggleCard(this)">
                        <div class="status-header"><span class="code">206</span> Partial Content</div>
                        <div class="status-body">Gedeeltelijke data bij paging (<code>_limit</code>/<code>_offset</code>).</div>
                    </div>
                </div>

                <div class="status-group redirect">
                    <h3>3xx Redirect</h3>
                    <div class="status-card" onclick="toggleCard(this)">
                        <div class="status-header"><span class="code">304</span> Not Modified</div>
                        <div class="status-body">Resource ongewijzigd (caching). Alleen voor GET/HEAD met <code>ETag</code>/<code>If-None-Match</code>.</div>
                    </div>
                </div>

                <div class="status-group client-error">
                    <h3>4xx Client Error</h3>
                    <div class="status-card" onclick="toggleCard(this)">
                        <div class="status-header"><span class="code">400</span> Bad Request</div>
                        <div class="status-body">Syntactische fout in body of query parameters. <strong>Niet</strong> voor path fouten (dat is 404).</div>
                    </div>
                    <div class="status-card" onclick="toggleCard(this)">
                        <div class="status-header"><span class="code">401</span> Unauthorized</div>
                        <div class="status-body">Authenticatie vereist of token ongeldig/verlopen.</div>
                    </div>
                    <div class="status-card" onclick="toggleCard(this)">
                        <div class="status-header"><span class="code">403</span> Forbidden</div>
                        <div class="status-body">Geen recht op deze actie. Gebruiker is geauthenticeerd maar niet geautoriseerd.</div>
                    </div>
                    <div class="status-card" onclick="toggleCard(this)">
                        <div class="status-header"><span class="code">404</span> Not Found</div>
                        <div class="status-body">Resource bestaat niet of path is ongeldig. Altijd bij path fouten.</div>
                    </div>
                    <div class="status-card" onclick="toggleCard(this)">
                        <div class="status-header"><span class="code">409</span> Conflict</div>
                        <div class="status-body">Duplicate key of concurrent update conflict.</div>
                    </div>
                    <div class="status-card" onclick="toggleCard(this)">
                        <div class="status-header"><span class="code">422</span> Unprocessable Entity</div>
                        <div class="status-body">Semantische validatiefout in body. <strong>Alleen</strong> bij POST/PUT/PATCH (methods met body).</div>
                    </div>
                </div>

                <div class="status-group server-error">
                    <h3>5xx Server Error</h3>
                    <div class="status-card" onclick="toggleCard(this)">
                        <div class="status-header"><span class="code">500</span> Internal Server Error</div>
                        <div class="status-body">Systeemfout. <strong>x-correlation-id</strong> is verplicht voor tracing.</div>
                    </div>
                    <div class="status-card" onclick="toggleCard(this)">
                        <div class="status-header"><span class="code">503</span> Service Unavailable</div>
                        <div class="status-body">Service tijdelijk niet beschikbaar. Gebruik <code>Retry-After</code> header.</div>
                    </div>
                </div>
            </div>

            <!-- ERROR RESPONSE FORMAT -->
            <div class="reference-table">
                <h3>Foutmelding Formaat (RFC 7807 - MFF BAS ID05)</h3>
                <pre class="code-block">{
  "type": "https://datatracker.ietf.org/doc/html/rfc7231#section-6.5.3",
  "title": "Forbidden",
  "status": 403,
  "detail": "Gebruiker heeft geen toegang tot deze resource",
  "instance": "/api/v1/users/123"
}</pre>
                <p class="note">Verplichte velden: <code>type</code>, <code>title</code>, <code>status</code>. Optioneel: <code>detail</code>, <code>instance</code>.</p>
            </div>
        </section>

        <!-- TAB 4: QUERY PARAMETERS -->
        <section id="query-params" class="tab-content">
            <h2>Query Parameters (MFF BAS)</h2>
            <p class="section-intro">Geen OData. Gebruik underscore-prefixed parameters conform MFF BAS richtlijnen.</p>

            <div class="param-grid">
                <div class="param-card">
                    <h3>Paging</h3>
                    <p class="param-rule">MFF BAS: response = <strong>206 Partial Content</strong></p>
                    <div class="param-examples">
                        <div class="param-example">
                            <code>?_limit=20</code>
                            <span>Aantal records per pagina</span>
                        </div>
                        <div class="param-example">
                            <code>?_offset=40</code>
                            <span>Records overslaan</span>
                        </div>
                        <div class="param-example">
                            <code>?_limit=20&amp;_offset=40</code>
                            <span>Pagina 3 (records 41-60)</span>
                        </div>
                    </div>
                    <pre class="code-block">GET /api/v1/users?_limit=20&amp;_offset=40

HTTP/1.1 206 Partial Content
x-correlation-id: 550e8400-e29b-41d4-a716-446655440000

{
  "data": [...],
  "total": 150
}</pre>
                </div>

                <div class="param-card">
                    <h3>Sorteren (MFF BAS ID03)</h3>
                    <p class="param-rule">Gebruik <code>_sort</code> met underscore prefix</p>
                    <div class="param-examples">
                        <div class="param-example">
                            <code>?_sort=name</code>
                            <span>Ascending (standaard)</span>
                        </div>
                        <div class="param-example">
                            <code>?_sort=-created_at</code>
                            <span>Descending (- prefix)</span>
                        </div>
                        <div class="param-example">
                            <code>?_sort=status,-date</code>
                            <span>Meerdere velden</span>
                        </div>
                    </div>
                </div>

                <div class="param-card">
                    <h3>Zoeken (MFF BAS ID04)</h3>
                    <p class="param-rule">Gebruik <code>_search</code> voor full-text zoeken</p>
                    <div class="param-examples">
                        <div class="param-example">
                            <code>?_search=jan</code>
                            <span>Full-text zoeken</span>
                        </div>
                        <div class="param-example">
                            <code>?status=active</code>
                            <span>Filter op specifiek veld</span>
                        </div>
                    </div>
                </div>

                <div class="param-card">
                    <h3>Expanderen (MFF BAS ID18)</h3>
                    <p class="param-rule">Gelinkte resources mee laden (eager loading)</p>
                    <div class="param-examples">
                        <div class="param-example">
                            <code>?_expand=address</code>
                            <span>Adres object meeladen</span>
                        </div>
                        <div class="param-example">
                            <code>?_fields=name,email</code>
                            <span>Representatie op maat (ID19)</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- HEADERS -->
            <div class="reference-table">
                <h3>Verplichte HTTP Headers (MFF BAS ID20)</h3>
                <table>
                    <thead>
                        <tr><th>Header</th><th>Type</th><th>Beschrijving</th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>x-correlation-id</code></td>
                            <td>Request &amp; Response</td>
                            <td>UUID voor tracing van transacties</td>
                        </tr>
                        <tr>
                            <td><code>x-request-id</code></td>
                            <td>Request</td>
                            <td>Unieke identificatie van het request</td>
                        </tr>
                        <tr>
                            <td><code>x-sender-id</code></td>
                            <td>Request</td>
                            <td>EAN13 van de aanroepende marktpartij</td>
                        </tr>
                        <tr>
                            <td><code>x-role</code></td>
                            <td>Request</td>
                            <td>Rol van de marktpartij</td>
                        </tr>
                        <tr>
                            <td><code>x-object-id</code></td>
                            <td>Response</td>
                            <td>Alternatief voor Location header</td>
                        </tr>
                        <tr>
                            <td><code>Location</code></td>
                            <td>Response</td>
                            <td>URI van nieuwe resource (bij 201)</td>
                        </tr>
                        <tr>
                            <td><code>ETag</code></td>
                            <td>Response</td>
                            <td>Versie-identifier voor caching</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- TAB: FLOWCHART -->
        <section id="flowchart" class="tab-content">
            <h2>Response Decision Flowchart</h2>
            <p class="section-intro">Visuele weergave van de beslisboom voor het bepalen van de juiste HTTP status code.</p>

            <div class="flowchart-container">
                <svg class="flowchart-svg" viewBox="0 0 900 820" xmlns="http://www.w3.org/2000/svg">
                    <!-- Connector lines -->
                    <!-- Auth Yes down -->
                    <line x1="280" y1="55" x2="280" y2="90" class="fc-line"/>
                    <!-- Auth No right -->
                    <line x1="330" y1="30" x2="560" y2="30" class="fc-line"/>
                    <!-- Authz Yes down -->
                    <line x1="280" y1="145" x2="280" y2="180" class="fc-line"/>
                    <!-- Authz No right -->
                    <line x1="330" y1="120" x2="560" y2="120" class="fc-line"/>
                    <!-- Syntax Yes down -->
                    <line x1="280" y1="235" x2="280" y2="270" class="fc-line"/>
                    <!-- Syntax No right -->
                    <line x1="330" y1="210" x2="560" y2="210" class="fc-line"/>
                    <!-- Semantic Yes down -->
                    <line x1="280" y1="325" x2="280" y2="360" class="fc-line"/>
                    <!-- Semantic No right -->
                    <line x1="330" y1="300" x2="560" y2="300" class="fc-line"/>
                    <!-- Exists Yes down -->
                    <line x1="280" y1="415" x2="280" y2="450" class="fc-line"/>
                    <!-- Exists No right -->
                    <line x1="330" y1="390" x2="560" y2="390" class="fc-line"/>
                    <!-- System Yes down -->
                    <line x1="280" y1="505" x2="280" y2="540" class="fc-line"/>
                    <!-- System No right -->
                    <line x1="330" y1="480" x2="560" y2="480" class="fc-line"/>
                    <!-- Caching Yes right -->
                    <line x1="330" y1="570" x2="560" y2="570" class="fc-line"/>
                    <!-- Caching No down -->
                    <line x1="280" y1="595" x2="280" y2="630" class="fc-line"/>
                    <!-- Paging Yes right -->
                    <line x1="330" y1="660" x2="560" y2="660" class="fc-line"/>
                    <!-- Paging No down -->
                    <line x1="280" y1="685" x2="280" y2="720" class="fc-line"/>

                    <!-- Arrow labels: Ja/Nee -->
                    <text x="275" y="78" class="fc-label fc-label-yes">Ja</text>
                    <text x="440" y="22" class="fc-label fc-label-no">Nee</text>

                    <text x="275" y="168" class="fc-label fc-label-yes">Ja</text>
                    <text x="440" y="112" class="fc-label fc-label-no">Nee</text>

                    <text x="275" y="258" class="fc-label fc-label-yes">Ja</text>
                    <text x="440" y="202" class="fc-label fc-label-no">Nee</text>

                    <text x="275" y="348" class="fc-label fc-label-yes">Ja</text>
                    <text x="440" y="292" class="fc-label fc-label-no">Nee</text>

                    <text x="275" y="438" class="fc-label fc-label-yes">Ja</text>
                    <text x="440" y="382" class="fc-label fc-label-no">Nee</text>

                    <text x="275" y="528" class="fc-label fc-label-yes">Ja</text>
                    <text x="440" y="472" class="fc-label fc-label-no">Nee</text>

                    <text x="440" y="562" class="fc-label fc-label-yes">Ja</text>
                    <text x="275" y="618" class="fc-label fc-label-no">Nee</text>

                    <text x="440" y="652" class="fc-label fc-label-yes">Ja</text>
                    <text x="275" y="708" class="fc-label fc-label-no">Nee</text>

                    <!-- Decision nodes -->
                    <g class="fc-decision">
                        <rect x="130" y="5" width="300" height="50" rx="4"/>
                        <text x="280" y="35">Heeft de gebruiker een geldig token?</text>
                    </g>
                    <g class="fc-decision">
                        <rect x="130" y="95" width="300" height="50" rx="4"/>
                        <text x="280" y="125">Heeft de gebruiker recht op deze actie?</text>
                    </g>
                    <g class="fc-decision">
                        <rect x="130" y="185" width="300" height="50" rx="4"/>
                        <text x="280" y="215">Is de body/query syntactisch correct?</text>
                    </g>
                    <g class="fc-decision">
                        <rect x="130" y="275" width="300" height="50" rx="4"/>
                        <text x="280" y="305">Is de body semantisch correct?</text>
                    </g>
                    <g class="fc-decision">
                        <rect x="130" y="365" width="300" height="50" rx="4"/>
                        <text x="280" y="395">Bestaat de resource?</text>
                    </g>
                    <g class="fc-decision">
                        <rect x="130" y="455" width="300" height="50" rx="4"/>
                        <text x="280" y="485">Werkt het systeem correct?</text>
                    </g>
                    <g class="fc-decision">
                        <rect x="130" y="545" width="300" height="50" rx="4"/>
                        <text x="280" y="575">Caching? Resource ongewijzigd?</text>
                    </g>
                    <g class="fc-decision">
                        <rect x="130" y="635" width="300" height="50" rx="4"/>
                        <text x="280" y="665">Wordt er paging gebruikt?</text>
                    </g>

                    <!-- Error result nodes (right side) -->
                    <g class="fc-result fc-client-error">
                        <rect x="570" y="8" width="200" height="44" rx="4"/>
                        <text x="670" y="35">401 Unauthorized</text>
                    </g>
                    <g class="fc-result fc-client-error">
                        <rect x="570" y="98" width="200" height="44" rx="4"/>
                        <text x="670" y="125">403 Forbidden</text>
                    </g>
                    <g class="fc-result fc-client-error">
                        <rect x="570" y="188" width="200" height="44" rx="4"/>
                        <text x="670" y="215">400 Bad Request</text>
                    </g>
                    <g class="fc-result fc-client-error">
                        <rect x="570" y="278" width="200" height="44" rx="4"/>
                        <text x="670" y="305">422 Unprocessable</text>
                    </g>
                    <g class="fc-result fc-client-error">
                        <rect x="570" y="368" width="200" height="44" rx="4"/>
                        <text x="670" y="395">404 Not Found</text>
                    </g>
                    <g class="fc-result fc-server-error">
                        <rect x="570" y="458" width="200" height="44" rx="4"/>
                        <text x="670" y="485">500 Internal Error</text>
                    </g>

                    <!-- Success/redirect result nodes (right side for caching/paging) -->
                    <g class="fc-result fc-redirect">
                        <rect x="570" y="548" width="200" height="44" rx="4"/>
                        <text x="670" y="575">304 Not Modified</text>
                    </g>
                    <g class="fc-result fc-success">
                        <rect x="570" y="638" width="200" height="44" rx="4"/>
                        <text x="670" y="665">206 Partial Content</text>
                    </g>

                    <!-- Final success block -->
                    <g class="fc-result fc-success fc-final">
                        <rect x="100" y="725" width="360" height="80" rx="4"/>
                        <text x="280" y="752" class="fc-final-title">Success</text>
                        <text x="280" y="772" class="fc-final-detail">GET/HEAD: 200 OK</text>
                        <text x="280" y="790" class="fc-final-detail">POST create: 201 Created | DELETE: 204 No Content</text>
                    </g>
                </svg>
            </div>
        </section>

        <!-- TAB: RICHTLIJNEN -->
        <section id="richtlijnen" class="tab-content">
            <h2>MFF BAS API Ontwerprichtlijnen v5.0</h2>
            <p class="section-intro">Overzicht van alle ontwerprichtlijnen voor REST API's in de Nederlandse energiesector. Vastgesteld door MFF BAS ALV op 22 januari 2025.</p>

            <div class="reference-table" style="margin-bottom: 32px; margin-top: 0;">
                <h3 style="margin-bottom: 8px;">Over dit document</h3>
                <table>
                    <tbody>
                        <tr><td style="width: 160px; font-weight: 600;">Document</td><td>API Ontwerprichtlijnen</td></tr>
                        <tr><td style="font-weight: 600;">Versie</td><td>5.0 &mdash; Vastgesteld</td></tr>
                        <tr><td style="font-weight: 600;">Datum</td><td>22 januari 2025</td></tr>
                        <tr><td style="font-weight: 600;">Opdrachtgever</td><td>MFF BAS</td></tr>
                        <tr><td style="font-weight: 600;">Basis</td><td>API Strategie voor de Nederlandse Overheid (ASNO), RFC 9110, RFC 7807</td></tr>
                        <tr><td style="font-weight: 600;">Classificatie</td><td>TLP: GROEN</td></tr>
                    </tbody>
                </table>
            </div>

            <div class="richtlijnen-section">
                <h3>Sectie 2.1 &mdash; Standaarden voor API ontwerp</h3>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 01</span>
                        <span class="richtlijn-title">API strategie voor de Nederlandse overheid</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Bij het ontwerpen en ontwikkelen van API's is de <em>API strategie voor de Nederlandse overheid</em> (ASNO) richtinggevend.</dd>
                            <dt>Toelichting</dt>
                            <dd>Deze API strategie is door de MFF bestempeld als algemeen uitgangspunt. Energiesector specifieke ontwerprichtlijnen zijn aanvullend opgenomen.</dd>
                            <dt>Afwijking</dt>
                            <dd>Niet alle service interacties zijn geschikt voor een REST-API. Overweeg of REST geschikt is voor het specifieke doel.</dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 02</span>
                        <span class="richtlijn-title">Gestandaardiseerde informatie modellen</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Gestandaardiseerde informatie modellen zoals IEC CIM, ebIX UML Model en ebIX EFET ENTSO-E Role Model zijn leidend voor naamgeving van resources en attributen.</dd>
                            <dt>Modellen</dt>
                            <dd>
                                <ul>
                                    <li>IEC Common Information Model (CIM)</li>
                                    <li>ebIX UML Model for the European Energy Market</li>
                                    <li>OASIS Universal Business Language (UBL)</li>
                                    <li>CMF Markt Model</li>
                                    <li>ebIX EFET ENTSO-E Harmonised Electricity Market Role Model</li>
                                    <li>NEN 5825 standaard voor adresnotatie</li>
                                    <li>BAG (Basisregistratie Adressen en Gebouwen)</li>
                                </ul>
                            </dd>
                            <dt>Afwijking</dt>
                            <dd>Eigen uitbreidingen van bestaande modellen hebben de voorkeur boven zelf verzinnen.</dd>
                        </dl>
                    </div>
                </div>
            </div>

            <div class="richtlijnen-section">
                <h3>Sectie 2.2 &mdash; Energiesector specifieke richtlijnen API ontwerp</h3>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 01</span>
                        <span class="richtlijn-title">Definitie van het koppelvlak</span>
                        <span class="richtlijn-tag">Taal</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Definitie van het koppelvlak (de API) in het <strong>UK-Engels</strong>.</dd>
                            <dt>Toelichting</dt>
                            <dd>Documentatie (zoals <code>description</code> en <code>example</code>) in het Engels. Resources en attributen in het Engels.</dd>
                            <dt>Onderbouwing</dt>
                            <dd>ASNO schrijft Nederlands voor (API-04). De energiesector kiest UK-Engels omdat dit beter aansluit bij internationale standaarden zoals IEC CIM en ebIX.</dd>
                            <dt>Afwijking</dt>
                            <dd>Interne APIs: keuze aan bedrijf.</dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 02</span>
                        <span class="richtlijn-title">Versiebeheer</span>
                        <span class="richtlijn-tag">Versioning</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>API's zijn altijd voorzien van een versie.</dd>
                            <dt>Regels</dt>
                            <dd>
                                <ul>
                                    <li><strong>major:</strong> Niet backward compatible, grote impact voor consumer</li>
                                    <li><strong>minor:</strong> Wel backward compatible, beperkte impact</li>
                                    <li><strong>patch:</strong> Wel backward compatible, zonder impact. Mag zonder berichtgeving uitgerold worden.</li>
                                </ul>
                            </dd>
                            <dt>Transitie</dt>
                            <dd>Voorkeur voor transitiescenario: nieuwe en productieversie worden gedurende een transitieperiode ondersteund. Max 3 versies gelijktijdig in productie.</dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 03</span>
                        <span class="richtlijn-title">Query parameter voor sorteren</span>
                        <span class="richtlijn-tag">Query</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Gebruik <code>sort</code> of <code>_sort</code> voor sorteren.</dd>
                            <dt>Toelichting</dt>
                            <dd>Conform ASNO API-31.</dd>
                            <dt>Advies</dt>
                            <dd>Underscore als prefix (<code>_sort</code>) om botsingen met resource-properties te voorkomen.</dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 04</span>
                        <span class="richtlijn-title">Query parameter voor zoeken</span>
                        <span class="richtlijn-tag">Query</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Gebruik <code>search</code> of <code>_search</code> voor full-text zoeken.</dd>
                            <dt>Toelichting</dt>
                            <dd>Conform ASNO API-32.</dd>
                            <dt>Advies</dt>
                            <dd>Underscore als prefix (<code>_search</code>) om botsingen met resource-properties te voorkomen.</dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 05</span>
                        <span class="richtlijn-title">Fouten en uitzonderingssituaties</span>
                        <span class="richtlijn-tag">Errors</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Foutmeldingen conform <strong>RFC 7807</strong> (API-46 in ASNO).</dd>
                            <dt>Verplichte attributen</dt>
                            <dd>
                                <ul>
                                    <li><code>type</code> - URI referentie naar het type fout</li>
                                    <li><code>title</code> - generieke titel voor het type fout</li>
                                    <li><code>status</code> - de HTTP status code</li>
                                </ul>
                            </dd>
                            <dt>Optionele attributen</dt>
                            <dd>
                                <ul>
                                    <li><code>detail</code> - extra gedetailleerde informatie</li>
                                    <li><code>instance</code> - URI van de aanroep die de fout veroorzaakte</li>
                                </ul>
                            </dd>
                            <dt>Voorbeeld</dt>
                            <dd><pre class="code-block">{
  "type": "https://datatracker.ietf.org/doc/html/rfc7231#section-6.5.3",
  "title": "Forbidden",
  "status": 403
}</pre></dd>
                            <dt>Regels</dt>
                            <dd>
                                <ol>
                                    <li>Foutmelding moet abstract en functioneel geformuleerd zijn</li>
                                    <li>De foutmelding moet in de payload (body) staan</li>
                                    <li>Geen technische implementatiedetails (bijv. stacktrace)</li>
                                </ol>
                            </dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 06</span>
                        <span class="richtlijn-title">Gebruik van ODATA</span>
                        <span class="richtlijn-tag">Standaard</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>API's dienen te worden gespecificeerd in OAS. Geen ondersteuning voor ODATA.</dd>
                            <dt>Toelichting</dt>
                            <dd>ODATA of WFS als aparte standaard houden, niet dwingen in OAS/API vorm. Voor datasets met complexe query-behoeften kan ODATA een optie zijn.</dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 07</span>
                        <span class="richtlijn-title">Definitie attributen Info object</span>
                        <span class="richtlijn-tag">OAS</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Elke API (OpenAPI 3.0+) moet een Info object bevatten.</dd>
                            <dt>Verplichte attributen</dt>
                            <dd><pre class="code-block">openapi: 3.0.3
info:
  title:
  description:
  termsOfService:
  contact:
    name:
    email:
  license:
    name:
    url:
  version:
  x-releaseDate:</pre></dd>
                            <dt>Toelichting</dt>
                            <dd>
                                <ul>
                                    <li><code>version</code> - versienummer als "v" + volledig versienummer (bijv. v2.0.1)</li>
                                    <li><code>x-releaseDate</code> - datum van vrijgave in ISO 8601 formaat</li>
                                    <li>Gebruik CommonMark syntax voor <code>description</code></li>
                                </ul>
                            </dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 08</span>
                        <span class="richtlijn-title">Gebruik van REST operaties</span>
                        <span class="richtlijn-tag">Methods</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>POST, GET, PUT, PATCH en DELETE worden gebruikt in de juiste context.</dd>
                            <dt>Operaties</dt>
                            <dd>
                                <ul>
                                    <li><strong>POST</strong> - create: voegt nieuwe resource toe aan collectie</li>
                                    <li><strong>GET</strong> - read: resource opvragen, data wordt niet gewijzigd</li>
                                    <li><strong>PUT</strong> - update/create: volledige resource vervangen</li>
                                    <li><strong>PATCH</strong> - partial update: gedeeltelijk bijwerken</li>
                                    <li><strong>DELETE</strong> - delete: specifieke resource verwijderen</li>
                                </ul>
                            </dd>
                            <dt>Afwijking</dt>
                            <dd>Privacy gevoelige informatie mag niet in de GET URI string. Gebruik POST indien nodig.</dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 09</span>
                        <span class="richtlijn-title">Complex search</span>
                        <span class="richtlijn-tag">Methods</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Gebruik POST voor uitgebreide zoekopdrachten (complex search).</dd>
                            <dt>Toelichting</dt>
                            <dd>POST met query parameters in de JSON body voor complex search is toegestaan. Dit staat los van geometrische queries (ASNO API-36/API-37).</dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 10</span>
                        <span class="richtlijn-title">HTTP status codes</span>
                        <span class="richtlijn-tag">Status</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Minimale set van HTTP status codes per REST operatie.</dd>
                            <dt>Matrix</dt>
                            <dd>Zie de <strong>Status Codes</strong> tab voor de volledige matrix per operatie.</dd>
                            <dt>Regels</dt>
                            <dd>
                                <ul>
                                    <li>400 en 500 zijn generiek en toepasbaar op alle operaties</li>
                                    <li>422 is strikt voor semantische validatie van de payload</li>
                                    <li>PUT kan optioneel 201/204 teruggeven bij creatie (Location header verplicht)</li>
                                    <li>204 is optioneel bij PUT/PATCH update zonder response payload</li>
                                    <li>200 bij DELETE als response payload met info over verwijderde resource nodig is</li>
                                </ul>
                            </dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 11</span>
                        <span class="richtlijn-title">Gebruik van JSON Schema Specification</span>
                        <span class="richtlijn-tag">Validatie</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Elke API call met een body <strong>moet</strong> voorzien zijn van een JSON Schema Specification.</dd>
                            <dt>Onderbouwing</dt>
                            <dd>
                                <ul>
                                    <li>API call kan vroegtijdig in de gateway worden afgewezen bij syntax-fouten</li>
                                    <li>Voorkomt dat backend-applicaties belast worden met niet-valide calls</li>
                                    <li>Stelt de API-gebruiker in staat berichten te valideren voor implementatie beschikbaar is</li>
                                </ul>
                            </dd>
                            <dt>Afwijking t.o.v. ASNO</dt>
                            <dd>ASNO schrijft JSON Schema niet verplicht voor (API-23). De energiesector verplicht dit wel.</dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 12</span>
                        <span class="richtlijn-title">Quality of Service specificatie</span>
                        <span class="richtlijn-tag">QoS</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Elke API heeft een Quality of Service specificatie (QoS).</dd>
                            <dt>Aspecten</dt>
                            <dd>
                                <ul>
                                    <li>Integration latency</li>
                                    <li>Openingstijden</li>
                                    <li>Beschikbaarheid</li>
                                    <li>Capaciteit</li>
                                    <li>Betrouwbaarheid</li>
                                </ul>
                            </dd>
                            <dt>Toelichting</dt>
                            <dd>Technische QoS-info in de OAS-specificatie opnemen. Business-relevante info in de servicebeschrijving.</dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 13</span>
                        <span class="richtlijn-title">Definiren van datum/tijd</span>
                        <span class="richtlijn-tag">Data types</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Datum/tijd notatie conform <strong>W3C DTF Note ISO 8601</strong>.</dd>
                            <dt>Advies</dt>
                            <dd>
                                <ul>
                                    <li>Hanteer UTC met de "Z" als time zone designator</li>
                                    <li>Specificeer de tijd met seconden en milliseconden</li>
                                    <li>Indien milliseconden niet bekend zijn, gebruik "000"</li>
                                </ul>
                            </dd>
                            <dt>Voorbeeld</dt>
                            <dd><code>2020-02-07T14:55:42.000Z</code></dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 14</span>
                        <span class="richtlijn-title">Definiren van een string</span>
                        <span class="richtlijn-tag">Data types</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Strings moeten voorzien zijn van een lengte-attribuut. Minimale lengte moet 1 zijn (0 is niet toegestaan).</dd>
                            <dt>Opties</dt>
                            <dd><pre class="code-block">type: string
minLength: 1
maxLength: 10

# of

type: string
length: 10</pre></dd>
                            <dt>Onderbouwing</dt>
                            <dd>Voorkomt dat een API call een lege string bevat die tot uitval kan leiden. Advies: definieer in ieder geval de maximale lengte voor strings in responses.</dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 15</span>
                        <span class="richtlijn-title">Autorisatie</span>
                        <span class="richtlijn-tag">Security</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Autorisatie met <strong>OAuth 2.0</strong>, bij voorkeur met <strong>OpenID Connect</strong>.</dd>
                            <dt>Geadviseerde flows</dt>
                            <dd>
                                <ul>
                                    <li><strong>Authorization code flow met PKCE</strong> - wanneer een gebruiker inlogt</li>
                                    <li><strong>Client credentials grant</strong> - voor applicatie-naar-applicatie autorisatie</li>
                                </ul>
                            </dd>
                            <dt>JWT</dt>
                            <dd>JWT Access tokens worden geadviseerd voor validatie op Resource server niveau zonder afhankelijkheid van een autorisatie server.</dd>
                            <dt>Referenties</dt>
                            <dd>
                                <ul>
                                    <li>OAuth2: RFC 6749</li>
                                    <li>OpenID Connect Core 1.0</li>
                                    <li>PKCE: RFC 7636</li>
                                </ul>
                            </dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 16</span>
                        <span class="richtlijn-title">Definiren van veldnamen</span>
                        <span class="richtlijn-tag">Naming</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Hanteer de definitie van veldnamen zoals het referentie model voorschrijft.</dd>
                            <dt>Toelichting</dt>
                            <dd>ASNO schrijft camelCase voor (API-26). Indien het referentie model (IEC CIM, ebIX) een eigen definitie heeft, prevaleert deze boven camelCase.</dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 17</span>
                        <span class="richtlijn-title">HAL voor hypermedia controls</span>
                        <span class="richtlijn-tag">HATEOAS</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Gebruik <strong>Hypertext Application Language (HAL)</strong> voor hypermedia controls.</dd>
                            <dt>Toelichting</dt>
                            <dd>HAL-representatie voor JSON gebruiken wanneer gerelateerde resources als hyperlinks worden teruggegeven.</dd>
                            <dt>Voorbeeld</dt>
                            <dd><pre class="code-block">{
  "ean": "871688520000000012",
  "_links": {
    "self": {
      "href": "/api/v1/connections/871688520000000012"
    },
    "meters": {
      "href": "/api/v1/connections/871688520000000012/meters"
    }
  }
}</pre></dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 18</span>
                        <span class="richtlijn-title">Expanderen van gelinkte resources</span>
                        <span class="richtlijn-tag">Query</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Gebruik query parameter <code>_expand</code> voor het mee laden van gelinkte resources (eager loading).</dd>
                            <dt>Voorbeeld</dt>
                            <dd><code>GET /api/v1/connections/123?_expand=meters</code></dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 19</span>
                        <span class="richtlijn-title">Representatie op maat</span>
                        <span class="richtlijn-tag">Query</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Gebruik query parameter <code>_fields</code> om individuele velden te selecteren.</dd>
                            <dt>Voordelen</dt>
                            <dd>
                                <ul>
                                    <li>Beperkt netwerkverkeer (relevant voor lichtgewicht toepassingen)</li>
                                    <li>Vereenvoudigt gebruik van de API</li>
                                    <li>Maakt de uitvoer aanpasbaar (op maat)</li>
                                </ul>
                            </dd>
                            <dt>Voorbeeld</dt>
                            <dd><code>GET /api/v1/connections/123?_fields=ean,connectionType</code></dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 20</span>
                        <span class="richtlijn-title">HTTP headers</span>
                        <span class="richtlijn-tag">Headers</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>HTTP headers voor beveiliging en metadata. Cardinaliteit is context-afhankelijk.</dd>
                            <dt>Extensie headers</dt>
                            <dd>
                                <table>
                                    <thead><tr><th>Header</th><th>Type</th><th>Beschrijving</th></tr></thead>
                                    <tbody>
                                        <tr><td><code>X-Object-ID</code></td><td>Response</td><td>Alternatief voor Location header (ID van gecreeerde resource)</td></tr>
                                        <tr><td><code>X-Correlation-ID</code></td><td>Req &amp; Resp</td><td>Unieke ID voor koppeling van berichten in een transactie</td></tr>
                                        <tr><td><code>X-Request-ID</code></td><td>Request</td><td>Unieke identificatie van het request</td></tr>
                                        <tr><td><code>X-Sender-ID</code></td><td>Request</td><td>EAN13 van de aanroepende marktpartij</td></tr>
                                        <tr><td><code>X-Role</code></td><td>Request</td><td>Rol van de marktpartij (bij X-Sender-ID)</td></tr>
                                        <tr><td><code>X-Principal-Token</code></td><td>Request</td><td>Unieke identificatie van aanroepende partij (bijv. OAuth access token)</td></tr>
                                    </tbody>
                                </table>
                            </dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 21</span>
                        <span class="richtlijn-title">Enumeraties</span>
                        <span class="richtlijn-tag">Data types</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Enumeraties zijn onder voorwaarden toegestaan voor opzichzelfstaande REST API's.</dd>
                            <dt>Regels</dt>
                            <dd>
                                <ul>
                                    <li>Enumeraties gebaseerd op internationale standaarden: volg die notatie</li>
                                    <li>Overige enumeraties: <strong>UPPER_SNAKE_CASE</strong> (conform API-66 ASNO)</li>
                                    <li>Dynamische reeks: kan wijzigen door regelgeving of business requirements</li>
                                    <li>Statische reeks: wijzigt niet meer (bijv. dagen van de week)</li>
                                </ul>
                            </dd>
                            <dt>Niet toegestaan</dt>
                            <dd>Enumeraties in REST API's die onderdeel zijn van een <strong>ketenproces</strong>, omdat wijzigingen impact hebben op de gehele informatie-uitwisseling.</dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 22</span>
                        <span class="richtlijn-title">Persoonsgegevens in de URL</span>
                        <span class="richtlijn-tag">Privacy</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Gewone persoonsgegevens mogen in de URL, mits aan voorwaarden voldaan.</dd>
                            <dt>Voorwaarden</dt>
                            <dd>
                                <ul>
                                    <li>Volledige bericht (body en URL) wordt versleuteld tijdens versturen</li>
                                    <li>Gegevens alleen inzichtelijk bij API Consumer, Gateway en Provider</li>
                                    <li>Gebruik alleen als noodzakelijk voor uitvoering van taken</li>
                                    <li>Geen gevoelige of bijzondere persoonsgegevens afleidbaar uit URL</li>
                                </ul>
                            </dd>
                            <dt>Toegestane identificerende gegevens</dt>
                            <dd>BAG, EAN-code, klantnummer, meternummer, postcode+huisnummer</dd>
                            <dt>Nooit in URL</dt>
                            <dd>BSN-nummer, gezondheidsgegevens, financiele gegevens, verbruiksgegevens, strafrechtelijke gegevens, en andere bijzondere persoonsgegevens.</dd>
                            <dt>Belangrijk</dt>
                            <dd><strong>Combineren van meerdere gewone persoonsgegevens in de URL is niet toegestaan!</strong></dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 23</span>
                        <span class="richtlijn-title">API specificatie</span>
                        <span class="richtlijn-tag">OAS</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>API's in <strong>OpenAPI Specificatie v3+</strong> (OAS v3). Uitsluitend <strong>JSON-formaat</strong>. YAML wordt niet ondersteund.</dd>
                            <dt>Onderbouwing</dt>
                            <dd>Eenduidig specificatieformaat leidt tot voorspelbaarheid, verbeterde interoperabiliteit en hogere developer experience.</dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 24</span>
                        <span class="richtlijn-title">Gebruik van xxxOf constructies</span>
                        <span class="richtlijn-tag">OAS</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>Het gebruik van <code>allOf</code>, <code>anyOf</code> en <code>oneOf</code> constructies moet worden <strong>vermeden</strong>.</dd>
                            <dt>Onderbouwing</dt>
                            <dd>Diverse code generatoren en applicaties gaan niet goed om met deze constructies en genereren foutieve code en importeerfouten.</dd>
                            <dt>Toekomst</dt>
                            <dd>Indien tooling dit in de toekomst beter ondersteunt, kan het bij een eerstvolgende breaking change worden heroverwogen na marktconsultatie.</dd>
                        </dl>
                    </div>
                </div>

                <div class="richtlijn-card">
                    <div class="richtlijn-header" onclick="toggleCard(this.parentElement)">
                        <span class="richtlijn-id">ID 25</span>
                        <span class="richtlijn-title">Conditionele toegang tot RESTful domein APIs</span>
                        <span class="richtlijn-tag">Security</span>
                    </div>
                    <div class="richtlijn-body">
                        <dl>
                            <dt>Strategie</dt>
                            <dd>
                                <ol>
                                    <li>Kies een praktische taxonomie op basis van de RESTful API scope</li>
                                    <li>Splits resources in separate <strong>value objects</strong>. Maak optioneel als niet alle afnemers er recht op hebben</li>
                                    <li>Maak attributen buiten value objects <strong>optioneel</strong> als ze rol-afhankelijk zijn</li>
                                </ol>
                            </dd>
                            <dt>Uitgangspunten</dt>
                            <dd>
                                <ul>
                                    <li>Elke resource wordt uniek geadresseerd door precies een endpoint</li>
                                    <li>Rollen van de afnemer zijn leidend voor terug te geven informatie</li>
                                    <li>Afnemer krijgt altijd de maximale informatie die past bij zijn permissies</li>
                                    <li>Scope is een enkel domein; geen informatie uit andere domeinen</li>
                                    <li>Subresources hebben altijd een eigen endpoint binnen de parent context</li>
                                    <li>Value objects zijn groepjes attributen met semantische betekenis maar zonder eigen identiteit</li>
                                </ul>
                            </dd>
                        </dl>
                    </div>
                </div>
            </div>
        </section>

        <!-- TAB 6: EXAMPLES -->
        <section id="examples" class="tab-content">
            <h2>Request/Response Voorbeelden</h2>
            <p class="section-intro">Concrete voorbeelden conform MFF BAS en Nederlandse API Strategie.</p>

            <div class="example-selector">
                <button class="example-btn active" onclick="showExample('ex-get-single')">GET singleton</button>
                <button class="example-btn" onclick="showExample('ex-get-collection')">GET collectie</button>
                <button class="example-btn" onclick="showExample('ex-post-create')">POST create</button>
                <button class="example-btn" onclick="showExample('ex-put')">PUT replace</button>
                <button class="example-btn" onclick="showExample('ex-patch')">PATCH update</button>
                <button class="example-btn" onclick="showExample('ex-delete')">DELETE</button>
                <button class="example-btn" onclick="showExample('ex-bulk-delete')">POST bulk-delete</button>
                <button class="example-btn" onclick="showExample('ex-error')">Error response</button>
            </div>

            <div id="ex-get-single" class="example-content active">
                <h3><span class="badge get">GET</span> Enkele resource ophalen</h3>
                <div class="example-pair">
                    <div class="example-request">
                        <h4>Request</h4>
                        <pre class="code-block">GET /api/v1/connections/871688520000000012 HTTP/1.1
Host: api.example.nl
Authorization: Bearer eyJhbGciOiJSUzI1NiIs...
x-correlation-id: 550e8400-e29b-41d4-a716-446655440000
x-request-id: 7c9e6679-7425-40de-944b-e07fc1f90ae7
x-sender-id: 8716885000000
x-role: LV
Accept: application/json</pre>
                    </div>
                    <div class="example-response">
                        <h4>Response - 200 OK</h4>
                        <pre class="code-block">HTTP/1.1 200 OK
Content-Type: application/json
x-correlation-id: 550e8400-e29b-41d4-a716-446655440000
ETag: "33a64df551425fcc55e4d42a148795d9f25f89d4"

{
  "ean": "871688520000000012",
  "connectionType": "SMALL",
  "address": {
    "streetName": "Barchman Wuytierslaan",
    "houseNumber": 6,
    "postalCode": "3818LH",
    "city": "Amersfoort"
  },
  "_links": {
    "self": {
      "href": "/api/v1/connections/871688520000000012"
    },
    "meters": {
      "href": "/api/v1/connections/871688520000000012/meters"
    }
  }
}</pre>
                    </div>
                </div>
            </div>

            <div id="ex-get-collection" class="example-content">
                <h3><span class="badge get">GET</span> Collectie met paging en sortering</h3>
                <div class="example-pair">
                    <div class="example-request">
                        <h4>Request</h4>
                        <pre class="code-block">GET /api/v1/connections?_limit=20&amp;_offset=0&amp;_sort=-createdAt&amp;connectionType=SMALL HTTP/1.1
Host: api.example.nl
Authorization: Bearer eyJhbGciOiJSUzI1NiIs...
x-correlation-id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
Accept: application/json</pre>
                    </div>
                    <div class="example-response">
                        <h4>Response - 206 Partial Content</h4>
                        <pre class="code-block">HTTP/1.1 206 Partial Content
Content-Type: application/json
x-correlation-id: a1b2c3d4-e5f6-7890-abcd-ef1234567890

{
  "data": [
    {
      "ean": "871688520000000012",
      "connectionType": "SMALL",
      "_links": {
        "self": {
          "href": "/api/v1/connections/871688520000000012"
        }
      }
    }
  ],
  "total": 1542
}</pre>
                    </div>
                </div>
            </div>

            <div id="ex-post-create" class="example-content">
                <h3><span class="badge post">POST</span> Nieuwe resource aanmaken</h3>
                <div class="example-pair">
                    <div class="example-request">
                        <h4>Request</h4>
                        <pre class="code-block">POST /api/v1/connections HTTP/1.1
Host: api.example.nl
Authorization: Bearer eyJhbGciOiJSUzI1NiIs...
x-correlation-id: b2c3d4e5-f6a7-8901-bcde-f12345678901
Content-Type: application/json

{
  "connectionType": "SMALL",
  "address": {
    "streetName": "Stationsplein",
    "houseNumber": 1,
    "postalCode": "3818LE",
    "city": "Amersfoort"
  }
}</pre>
                    </div>
                    <div class="example-response">
                        <h4>Response - 201 Created</h4>
                        <pre class="code-block">HTTP/1.1 201 Created
Content-Type: application/json
Location: /api/v1/connections/871688520000000099
x-correlation-id: b2c3d4e5-f6a7-8901-bcde-f12345678901
x-object-id: 871688520000000099

{
  "ean": "871688520000000099",
  "connectionType": "SMALL",
  "address": {
    "streetName": "Stationsplein",
    "houseNumber": 1,
    "postalCode": "3818LE",
    "city": "Amersfoort"
  }
}</pre>
                    </div>
                </div>
            </div>

            <div id="ex-put" class="example-content">
                <h3><span class="badge put">PUT</span> Resource vervangen</h3>
                <div class="example-pair">
                    <div class="example-request">
                        <h4>Request</h4>
                        <pre class="code-block">PUT /api/v1/connections/871688520000000012 HTTP/1.1
Host: api.example.nl
Authorization: Bearer eyJhbGciOiJSUzI1NiIs...
x-correlation-id: c3d4e5f6-a7b8-9012-cdef-123456789012
Content-Type: application/json

{
  "connectionType": "LARGE",
  "address": {
    "streetName": "Barchman Wuytierslaan",
    "houseNumber": 6,
    "postalCode": "3818LH",
    "city": "Amersfoort"
  }
}</pre>
                    </div>
                    <div class="example-response">
                        <h4>Response - 200 OK</h4>
                        <pre class="code-block">HTTP/1.1 200 OK
Content-Type: application/json
x-correlation-id: c3d4e5f6-a7b8-9012-cdef-123456789012

{
  "ean": "871688520000000012",
  "connectionType": "LARGE",
  "address": {
    "streetName": "Barchman Wuytierslaan",
    "houseNumber": 6,
    "postalCode": "3818LH",
    "city": "Amersfoort"
  }
}</pre>
                    </div>
                </div>
            </div>

            <div id="ex-patch" class="example-content">
                <h3><span class="badge patch">PATCH</span> Resource deels wijzigen</h3>
                <div class="example-pair">
                    <div class="example-request">
                        <h4>Request</h4>
                        <pre class="code-block">PATCH /api/v1/connections/871688520000000012 HTTP/1.1
Host: api.example.nl
Authorization: Bearer eyJhbGciOiJSUzI1NiIs...
x-correlation-id: d4e5f6a7-b8c9-0123-defa-234567890123
Content-Type: application/json

{
  "connectionType": "LARGE"
}</pre>
                    </div>
                    <div class="example-response">
                        <h4>Response - 200 OK</h4>
                        <pre class="code-block">HTTP/1.1 200 OK
Content-Type: application/json
x-correlation-id: d4e5f6a7-b8c9-0123-defa-234567890123

{
  "ean": "871688520000000012",
  "connectionType": "LARGE",
  "address": {
    "streetName": "Barchman Wuytierslaan",
    "houseNumber": 6,
    "postalCode": "3818LH",
    "city": "Amersfoort"
  }
}</pre>
                    </div>
                </div>
            </div>

            <div id="ex-delete" class="example-content">
                <h3><span class="badge delete">DELETE</span> Resource verwijderen</h3>
                <div class="example-pair">
                    <div class="example-request">
                        <h4>Request</h4>
                        <pre class="code-block">DELETE /api/v1/connections/871688520000000012 HTTP/1.1
Host: api.example.nl
Authorization: Bearer eyJhbGciOiJSUzI1NiIs...
x-correlation-id: e5f6a7b8-c9d0-1234-efab-345678901234</pre>
                    </div>
                    <div class="example-response">
                        <h4>Response - 204 No Content</h4>
                        <pre class="code-block">HTTP/1.1 204 No Content
x-correlation-id: e5f6a7b8-c9d0-1234-efab-345678901234</pre>
                    </div>
                </div>
            </div>

            <div id="ex-bulk-delete" class="example-content">
                <h3><span class="badge post">POST</span> Bulk delete (async)</h3>
                <div class="example-pair">
                    <div class="example-request">
                        <h4>Request</h4>
                        <pre class="code-block">POST /api/v1/connections/bulk-delete HTTP/1.1
Host: api.example.nl
Authorization: Bearer eyJhbGciOiJSUzI1NiIs...
x-correlation-id: f6a7b8c9-d0e1-2345-fabc-456789012345
Content-Type: application/json

{
  "ids": [
    "871688520000000012",
    "871688520000000034",
    "871688520000000056"
  ]
}</pre>
                    </div>
                    <div class="example-response">
                        <h4>Response - 202 Accepted</h4>
                        <pre class="code-block">HTTP/1.1 202 Accepted
x-correlation-id: f6a7b8c9-d0e1-2345-fabc-456789012345
Location: /api/v1/tasks/bulk-del-78901</pre>
                    </div>
                </div>
            </div>

            <div id="ex-error" class="example-content">
                <h3>Error Response (RFC 7807 - MFF BAS ID05)</h3>
                <div class="example-pair">
                    <div class="example-request">
                        <h4>Request (ongeldige body)</h4>
                        <pre class="code-block">POST /api/v1/connections HTTP/1.1
Host: api.example.nl
Authorization: Bearer eyJhbGciOiJSUzI1NiIs...
x-correlation-id: a7b8c9d0-e1f2-3456-abcd-567890123456
Content-Type: application/json

{
  "connectionType": "UNKNOWN_TYPE"
}</pre>
                    </div>
                    <div class="example-response">
                        <h4>Response - 422 Unprocessable Entity</h4>
                        <pre class="code-block">HTTP/1.1 422 Unprocessable Entity
Content-Type: application/problem+json
x-correlation-id: a7b8c9d0-e1f2-3456-abcd-567890123456

{
  "type": "https://api.example.nl/errors/invalid-connection-type",
  "title": "Invalid connection type",
  "status": 422,
  "detail": "Value 'UNKNOWN_TYPE' is not a valid connectionType. Allowed values: SMALL, LARGE",
  "instance": "/api/v1/connections"
}</pre>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer>
        <div class="container">
            <p>REST Besliswijzer &mdash; Gebaseerd op <strong>MFF BAS API Ontwerprichtlijnen v5.0</strong>, <strong>Nederlandse API Strategie (ASNO)</strong> en <strong>RFC 9110</strong></p>
            <p class="footer-links">
                <a href="https://github.com/casparkleijne/tools.hyperdata.nl">GitHub</a>
            </p>
        </div>
    </footer>

    <script src="js/app.js"></script>
</body>
</html>
